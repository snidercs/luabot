typename: DriverStation
header: frc/DriverStation.h
namespace: frc

templates:
  StaticVoid: &StaticVoid
    static: true
    return_type: void
  
  StaticGetInt: &StaticGetInt
    static: true
    return_type: int
  StaticGetDouble: &StaticGetDouble
    static: true
    return_type: double
  StaticGetBool: &StaticGetBool
    static: true
    return_type: bool

methods:
  GetStickButton:
    <<: *StaticGetBool
    params:
      stick: int
      button: int

  GetStickButtonPressed:
    <<: *StaticGetBool
    params:
      stick: int
      button: int
  GetStickButtonReleased:
    <<: *StaticGetBool
    params:
      stick: int
      button: int

  GetStickAxis:
    <<: *StaticGetDouble
    params:
      stick: int
      axis: int
  GetStickPOV:
    <<: *StaticGetInt
    params:
      stick: int
      pov: int
  GetStickButtons:
    <<: *StaticGetInt
    params:
      stick: int
  
  GetStickAxisCount:
    <<: *StaticGetInt
    params:
      stick: int
  GetStickPOVCount:
    <<: *StaticGetInt
    params:
      stick: int
  GetStickButtonCount:
    <<: *StaticGetInt
    params:
      stick: int

  GetJoystickIsXbox:
    <<: *StaticGetBool
    params:
      stick: int

  GetJoystickType:
    <<: *StaticGetInt
    params:
      stick: int
  
  GetJoystickName:
    static: true
    return_type: string
    params:
      stick: int
    c_body: |
      auto str = frc::DriverStation::GetJoystickName(stick);
          auto buf = (char*) malloc (str.size() + 1);
          std::strcpy (buf, str.c_str());
          return buf;
    lua_body: |
      local ptr = lib.frcDriverStationGetJoystickName(stick)
          if ptr == nil then return "" end
          local str = ffi.string(ptr)
          ffi.C.free(ptr)
          return str

  GetJoystickAxisType:
    <<: *StaticGetInt
    params:
      stick: int
      axis: int

  IsJoystickConnected:
    <<: *StaticGetBool
    params:
      stick: int
  
  IsEnabled:
    <<: *StaticGetBool
  IsDisabled:
    <<: *StaticGetBool
  IsEStopped:
    <<: *StaticGetBool
  IsAutonomous:
    <<: *StaticGetBool
  IsAutonomousEnabled:
    <<: *StaticGetBool
  IsTeleop:
    <<: *StaticGetBool
  IsTeleopEnabled:
    <<: *StaticGetBool
  IsTest:
    <<: *StaticGetBool
  IsTestEnabled:
    <<: *StaticGetBool
  IsDSAttached:
    <<: *StaticGetBool
  IsFMSAttached:
    <<: *StaticGetBool

  # GetGameSpecificMessage:
  # GetEventName:
  # GetMatchType:

  GetMatchNumber:
    <<: *StaticGetInt
  GetReplayNumber:
    <<: *StaticGetInt

  # GetAlliance
  # GetLocation
  # WaitForDsConnection
  # GetMatchTime

  GetBatteryVoltage:
    <<: *StaticGetDouble
  
  RefreshData:
    <<: *StaticVoid

  # ProvideRefreshedDataEventHandle
  SilenceJoystickConnectionWarning:
    <<: *StaticVoid
    params:
      silence: bool
  IsJoystickConnectionWarningSilenced:
    <<: *StaticGetBool

  # StartDataLog
